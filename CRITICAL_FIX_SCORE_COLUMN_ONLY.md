# ã€é‡å¤§ãƒã‚°ä¿®æ­£ã€‘è©•ä¾¡åˆ—ã‹ã‚‰ã®ã‚¹ã‚³ã‚¢å†è¨ˆç®—ã‚’å®Œå…¨åœæ­¢

## ðŸš¨ å•é¡Œ

CSVèª­ã¿è¾¼ã¿æ™‚ã«ã€Œè©•ä¾¡ã€åˆ—ï¼ˆ"ã§ãã‚‹", "ã ã„ãŸã„ã§ãã‚‹"ãªã©ï¼‰ã‹ã‚‰ã‚¹ã‚³ã‚¢ã‚’å†è¨ˆç®—ã—ã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã€ã€Œã‚¹ã‚³ã‚¢ã€åˆ—ã®å€¤ãŒæ­£ã—ãåæ˜ ã•ã‚Œãªã„ã€‚

## âœ… ä¿®æ­£å†…å®¹

### ä¿®æ­£å‰ã®å•é¡Œ

```javascript
// æ›–æ˜§ãªå®Ÿè£…
const scoreRaw = row[colMap['ã‚¹ã‚³ã‚¢']];
const score = normalizeNumber(scoreRaw);  // å†…éƒ¨å‡¦ç†ãŒä¸é€æ˜Ž
```

### ä¿®æ­£å¾Œï¼ˆæ˜Žç¢ºãªå®Ÿè£…ï¼‰

```javascript
// ===== ã€é‡è¦ã€‘ã€Œã‚¹ã‚³ã‚¢ã€åˆ—ã®ã¿ä½¿ç”¨ï¼ˆã€Œè©•ä¾¡ã€åˆ—ã¯ä½¿ç”¨ã—ãªã„ï¼‰ =====
const scoreRaw = row[colMap['ã‚¹ã‚³ã‚¢']];  // â† å¿…ãšã€Œã‚¹ã‚³ã‚¢ã€åˆ—ã®ã¿

// è©•ä¾¡åˆ—ã¯å‚ç…§ã®ã¿ï¼ˆã‚¹ã‚³ã‚¢è¨ˆç®—ã«ã¯ä¸€åˆ‡ä½¿ç”¨ã—ãªã„ï¼‰
const hyokaText = colMap['è©•ä¾¡'] !== undefined ? row[colMap['è©•ä¾¡']] : '';

// ===== ã€é‡è¦ã€‘ã‚¹ã‚³ã‚¢å¤‰æ›: ã€Œã‚¹ã‚³ã‚¢ã€åˆ—ã®å€¤ã®ã¿ä½¿ç”¨ =====
// 1. æ–‡å­—åˆ—ã‚’ãƒˆãƒªãƒ 
// 2. å…¨è§’æ•°å­—ã‚’åŠè§’ã«å¤‰æ›
// 3. Number()ã§æ•°å€¤åŒ–
// 4. 1ã€œ5ã®ç¯„å›²ãƒã‚§ãƒƒã‚¯ï¼ˆç¯„å›²å¤–ã¯nullï¼‰
const scoreNormalized = String(scoreRaw || '').trim();
const scoreConverted = scoreNormalized.replace(/[ï¼-ï¼™]/g, s => 
    String.fromCharCode(s.charCodeAt(0) - 0xFEE0)
);
const scoreNumber = Number(scoreConverted);
const score = (!isNaN(scoreNumber) && scoreNumber >= 1 && scoreNumber <= 5) 
    ? scoreNumber 
    : null;
```

---

## ðŸ” è¿½åŠ ã•ã‚ŒãŸæ¤œè¨¼ãƒ­ã‚°

### ã€Œè·æ¥­ç”Ÿæ´»ã€+ã€Œæ¬ å¸­ã€ã‚’å«ã‚€é …ç›®ã®è©³ç´°ãƒ­ã‚°

```javascript
if (isDebugTarget) {
    console.log('  ã€æ¤œè¨¼ã€‘CSV raw score:', JSON.stringify(scoreRaw));
    console.log('  ã€å‚è€ƒã€‘è©•ä¾¡åˆ—ã®å€¤:', JSON.stringify(hyokaText), 'â† ã‚¹ã‚³ã‚¢è¨ˆç®—ã«ã¯ä½¿ç”¨ã—ãªã„');
    console.log('  ã€æ¤œè¨¼ã€‘æœ€çµ‚æŽ¡ç”¨score:', score);
    console.log('  å¤‰æ›éŽç¨‹:');
    console.log('    1. raw:', JSON.stringify(scoreRaw));
    console.log('    2. trimmed:', JSON.stringify(scoreNormalized));
    console.log('    3. å…¨è§’â†’åŠè§’:', JSON.stringify(scoreConverted));
    console.log('    4. Number():', scoreNumber);
    console.log('    5. ç¯„å›²ãƒã‚§ãƒƒã‚¯(1ã€œ5):', score);
}
```

---

## ðŸ“Š å‡ºåŠ›ä¾‹

### ã‚±ãƒ¼ã‚¹1: æ­£å¸¸ãªã‚¹ã‚³ã‚¢ (5)

```
ðŸ” [è¡Œ3] ãƒ‡ãƒãƒƒã‚°å¯¾è±¡é …ç›®ã‚’æ¤œå‡º:
  categoryRaw: "è·æ¥­ç”Ÿæ´»"
  itemNameRaw: "æ¬ å¸­ç­‰ã®é€£çµ¡"
  ã€æ¤œè¨¼ã€‘CSV raw score: "5"
  ã€å‚è€ƒã€‘è©•ä¾¡åˆ—ã®å€¤: "ã§ãã‚‹" â† ã‚¹ã‚³ã‚¢è¨ˆç®—ã«ã¯ä½¿ç”¨ã—ãªã„

ðŸ”‘ makeItemKey() called:
  category (raw): "è·æ¥­ç”Ÿæ´»"
  itemName (raw): "æ¬ å¸­ç­‰ã®é€£çµ¡"
  key (final): "è·æ¥­ç”Ÿæ´»__æ¬ å¸­ç­‰ã®é€£çµ¡"

  ã€æ¤œè¨¼ã€‘æœ€çµ‚æŽ¡ç”¨score: 5
  å¤‰æ›éŽç¨‹:
    1. raw: "5"
    2. trimmed: "5"
    3. å…¨è§’â†’åŠè§’: "5"
    4. Number(): 5
    5. ç¯„å›²ãƒã‚§ãƒƒã‚¯(1ã€œ5): 5

ðŸ”ðŸ”ðŸ” [ç‰¹å®šã‚­ãƒ¼è¿½è·¡é–‹å§‹] ðŸ”ðŸ”ðŸ”
scoreMap.get("è·æ¥­ç”Ÿæ´»__æ¬ å¸­ç­‰ã®é€£çµ¡") = 5  âœ… æ­£ã—ã„ï¼
```

### ã‚±ãƒ¼ã‚¹2: å…¨è§’æ•°å­— (ï¼•)

```
  ã€æ¤œè¨¼ã€‘CSV raw score: "ï¼•"
  ã€å‚è€ƒã€‘è©•ä¾¡åˆ—ã®å€¤: "ã§ãã‚‹" â† ã‚¹ã‚³ã‚¢è¨ˆç®—ã«ã¯ä½¿ç”¨ã—ãªã„
  ã€æ¤œè¨¼ã€‘æœ€çµ‚æŽ¡ç”¨score: 5
  å¤‰æ›éŽç¨‹:
    1. raw: "ï¼•"
    2. trimmed: "ï¼•"
    3. å…¨è§’â†’åŠè§’: "5"
    4. Number(): 5
    5. ç¯„å›²ãƒã‚§ãƒƒã‚¯(1ã€œ5): 5

scoreMap.get("è·æ¥­ç”Ÿæ´»__æ¬ å¸­ç­‰ã®é€£çµ¡") = 5  âœ… å…¨è§’â†’åŠè§’å¤‰æ›æˆåŠŸï¼
```

### ã‚±ãƒ¼ã‚¹3: ç¯„å›²å¤–ã®å€¤ (0, 6, 7, etc.)

```
  ã€æ¤œè¨¼ã€‘CSV raw score: "0"
  ã€å‚è€ƒã€‘è©•ä¾¡åˆ—ã®å€¤: "ã§ããªã„" â† ã‚¹ã‚³ã‚¢è¨ˆç®—ã«ã¯ä½¿ç”¨ã—ãªã„
  ã€æ¤œè¨¼ã€‘æœ€çµ‚æŽ¡ç”¨score: null
  å¤‰æ›éŽç¨‹:
    1. raw: "0"
    2. trimmed: "0"
    3. å…¨è§’â†’åŠè§’: "0"
    4. Number(): 0
    5. ç¯„å›²ãƒã‚§ãƒƒã‚¯(1ã€œ5): null  â† 1ã€œ5ã®ç¯„å›²å¤–ãªã®ã§null

scoreMap.get("è·æ¥­ç”Ÿæ´»__æ¬ å¸­ç­‰ã®é€£çµ¡") = null
```

### ã‚±ãƒ¼ã‚¹4: ç©ºç™½ãƒ»ç„¡åŠ¹ãªå€¤

```
  ã€æ¤œè¨¼ã€‘CSV raw score: ""
  ã€å‚è€ƒã€‘è©•ä¾¡åˆ—ã®å€¤: "æœªè©•ä¾¡" â† ã‚¹ã‚³ã‚¢è¨ˆç®—ã«ã¯ä½¿ç”¨ã—ãªã„
  ã€æ¤œè¨¼ã€‘æœ€çµ‚æŽ¡ç”¨score: null
  å¤‰æ›éŽç¨‹:
    1. raw: ""
    2. trimmed: ""
    3. å…¨è§’â†’åŠè§’: ""
    4. Number(): NaN
    5. ç¯„å›²ãƒã‚§ãƒƒã‚¯(1ã€œ5): null

scoreMap.get("è·æ¥­ç”Ÿæ´»__æ¬ å¸­ç­‰ã®é€£çµ¡") = null
```

---

## ðŸŽ¯ é”æˆæ¡ä»¶ã®ç¢ºèª

### æ¡ä»¶: ã€Œæ¬ å¸­ç­‰ã®é€£çµ¡ã€ã®scoreMap.getãŒ5ã«ãªã‚‹ã“ã¨

**CSVå†…å®¹**:
```csv
ã‚«ãƒ†ã‚´ãƒª,é …ç›®,ã‚¹ã‚³ã‚¢,è©•ä¾¡
è·æ¥­ç”Ÿæ´»,æ¬ å¸­ç­‰ã®é€£çµ¡,5,ã§ãã‚‹
```

**æœŸå¾…ã•ã‚Œã‚‹å‡ºåŠ›**:
```
ðŸ”ðŸ”ðŸ” [ç‰¹å®šã‚­ãƒ¼è¿½è·¡é–‹å§‹] ðŸ”ðŸ”ðŸ”
å¯¾è±¡ã‚­ãƒ¼: "è·æ¥­ç”Ÿæ´»__æ¬ å¸­ç­‰ã®é€£çµ¡"
scoreMapã«å­˜åœ¨: true
scoreMap.get("è·æ¥­ç”Ÿæ´»__æ¬ å¸­ç­‰ã®é€£çµ¡") = 5  âœ… é”æˆï¼
```

---

## ðŸ”’ å®Ÿè£…ãƒ«ãƒ¼ãƒ«ã®éµå®ˆ

### âœ… å®Ÿè£…ãƒ«ãƒ¼ãƒ«1: const score = Number(row["ã‚¹ã‚³ã‚¢"])

```javascript
const scoreRaw = row[colMap['ã‚¹ã‚³ã‚¢']];  // ã‚¹ã‚³ã‚¢åˆ—ã‹ã‚‰å–å¾—
const scoreNumber = Number(scoreConverted);  // Number()ã§å¤‰æ›
const score = (!isNaN(scoreNumber) && scoreNumber >= 1 && scoreNumber <= 5) 
    ? scoreNumber 
    : null;
```

### âœ… å®Ÿè£…ãƒ«ãƒ¼ãƒ«2: 1ã€œ5ä»¥å¤–ã¯null

```javascript
const score = (!isNaN(scoreNumber) && scoreNumber >= 1 && scoreNumber <= 5) 
    ? scoreNumber 
    : null;
```

| å…¥åŠ›å€¤ | scoreNumber | score |
|--------|-------------|-------|
| "1" | 1 | 1 âœ… |
| "3" | 3 | 3 âœ… |
| "5" | 5 | 5 âœ… |
| "0" | 0 | null âŒ (ç¯„å›²å¤–) |
| "6" | 6 | null âŒ (ç¯„å›²å¤–) |
| "" | NaN | null âŒ (éžæ•°å€¤) |
| "abc" | NaN | null âŒ (éžæ•°å€¤) |

### âœ… å®Ÿè£…ãƒ«ãƒ¼ãƒ«3: è©•ä¾¡åˆ—ã¯ä¸€åˆ‡ä½¿ç”¨ã—ãªã„

```javascript
// è©•ä¾¡åˆ—ã¯å‚ç…§ã®ã¿ï¼ˆã‚¹ã‚³ã‚¢è¨ˆç®—ã«ã¯ä¸€åˆ‡ä½¿ç”¨ã—ãªã„ï¼‰
const hyokaText = colMap['è©•ä¾¡'] !== undefined ? row[colMap['è©•ä¾¡']] : '';

if (isDebugTarget) {
    console.log('  ã€å‚è€ƒã€‘è©•ä¾¡åˆ—ã®å€¤:', JSON.stringify(hyokaText), 'â† ã‚¹ã‚³ã‚¢è¨ˆç®—ã«ã¯ä½¿ç”¨ã—ãªã„');
}

// âœ… è©•ä¾¡åˆ—ã¯ãƒ­ã‚°è¡¨ç¤ºã®ã¿ã§ã€scoreè¨ˆç®—ã«ã¯ä¸€åˆ‡é–¢ä¸Žã—ãªã„
```

---

## ðŸ§ª ãƒ†ã‚¹ãƒˆæ–¹æ³•

### æ‰‹é †

1. https://smilestep-code.github.io/assessment-app/ ã‚’é–‹ã
2. **Ctrl+Shift+R** ã§ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢ï¼ˆé‡è¦ï¼ï¼‰
3. **F12** ã§é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ« â†’ Console ã‚¿ãƒ–
4. ä»¥ä¸‹ã®CSVãƒ•ã‚¡ã‚¤ãƒ«ã‚’æº–å‚™:

```csv
è¨˜å…¥æ—¥,åˆ©ç”¨è€…å,ç®¡ç†ç•ªå·,è©•ä¾¡å®Ÿæ–½è€…å,è©•ä¾¡æœŸé–“é–‹å§‹,è©•ä¾¡æœŸé–“çµ‚äº†,ã‚«ãƒ†ã‚´ãƒª,é …ç›®,ã‚¹ã‚³ã‚¢,è©•ä¾¡,ãƒ¡ãƒ¢
2026-02-18,ãƒ†ã‚¹ãƒˆå¤ªéƒŽ,TEST001,å±±ç”°èŠ±å­,2026-02-01,2026-02-15,è·æ¥­ç”Ÿæ´»,æ¬ å¸­ç­‰ã®é€£çµ¡,5,ã§ãã‚‹,æ­£å¸¸ã«é€£çµ¡ã§ãã‚‹
```

5. ã€ŒCSVèª­è¾¼ã€ã§ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
6. ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ä»¥ä¸‹ã‚’ç¢ºèª:

```
ã€æ¤œè¨¼ã€‘CSV raw score: "5"
ã€æ¤œè¨¼ã€‘æœ€çµ‚æŽ¡ç”¨score: 5
scoreMap.get("è·æ¥­ç”Ÿæ´»__æ¬ å¸­ç­‰ã®é€£çµ¡") = 5
âœ… ä¸€è‡´ã—ã¦ã„ã¾ã™ï¼
```

---

## ðŸ› å•é¡Œã®åŽŸå› åˆ†æž

### ä»¥å‰ã®å®Ÿè£…ã®å•é¡Œç‚¹

```javascript
// ä»¥å‰: normalizeNumber()é–¢æ•°ã«å‡¦ç†ã‚’å§”è­²
const score = normalizeNumber(scoreRaw);
```

**å•é¡Œ**:
- `normalizeNumber()` é–¢æ•°ãŒä½•ã‚’ã—ã¦ã„ã‚‹ã‹ä¸é€æ˜Ž
- è©•ä¾¡åˆ—ã‚’å‚ç…§ã—ã¦ã„ãªã„ã‹ç¢ºèªå›°é›£
- ãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°ãŒä¸ååˆ†

### ä¿®æ­£å¾Œã®åˆ©ç‚¹

```javascript
// ä¿®æ­£å¾Œ: ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³å±•é–‹ã§å‡¦ç†ãŒæ˜Žç¢º
const scoreNormalized = String(scoreRaw || '').trim();
const scoreConverted = scoreNormalized.replace(/[ï¼-ï¼™]/g, s => 
    String.fromCharCode(s.charCodeAt(0) - 0xFEE0)
);
const scoreNumber = Number(scoreConverted);
const score = (!isNaN(scoreNumber) && scoreNumber >= 1 && scoreNumber <= 5) 
    ? scoreNumber 
    : null;
```

**åˆ©ç‚¹**:
- âœ… å‡¦ç†ãŒå®Œå…¨ã«å¯è¦–åŒ–
- âœ… è©•ä¾¡åˆ—ã‚’çµ¶å¯¾ã«å‚ç…§ã—ãªã„ä¿è¨¼
- âœ… å„ã‚¹ãƒ†ãƒƒãƒ—ã§ãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°å‡ºåŠ›
- âœ… 1ã€œ5ã®ç¯„å›²ãƒã‚§ãƒƒã‚¯ãŒæ˜Žç¢º

---

## ðŸ“ å¤‰æ›´ãƒ•ã‚¡ã‚¤ãƒ«

1. **js/assessment.js**
   - CSVèª­è¾¼å‡¦ç†ã®`dataRows.forEach()`ã‚’å®Œå…¨æ›¸ãæ›ãˆ
   - `normalizeNumber()`é–¢æ•°ã®ä½¿ç”¨ã‚’åœæ­¢ï¼ˆã‚¤ãƒ³ãƒ©ã‚¤ãƒ³å±•é–‹ï¼‰
   - è©•ä¾¡åˆ—ã‚’æ˜Žç¤ºçš„ã«ã€Œå‚ç…§ã®ã¿ï¼ˆè¨ˆç®—ã«ä½¿ç”¨ã—ãªã„ï¼‰ã€ã¨å®£è¨€
   - è©³ç´°ãªæ¤œè¨¼ãƒ­ã‚°è¿½åŠ 

2. **index.html**
   - ãƒãƒ¼ã‚¸ãƒ§ãƒ³æ›´æ–°: `?v=202602180110` â†’ `?v=202602180120`

---

## ðŸš€ ãƒ‡ãƒ—ãƒ­ã‚¤æƒ…å ±

- **ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 202602180120
- **å¤‰æ›´å†…å®¹**: è©•ä¾¡åˆ—ã‹ã‚‰ã®ã‚¹ã‚³ã‚¢å†è¨ˆç®—ã‚’å®Œå…¨åœæ­¢
- **ã‚³ãƒŸãƒƒãƒˆ**: ï¼ˆæ¬¡ã®ã‚³ãƒŸãƒƒãƒˆã§ç¢ºå®šï¼‰
- **GitHub Pages**: https://smilestep-code.github.io/assessment-app/

---

## ðŸ’¡ é‡è¦ãƒã‚¤ãƒ³ãƒˆ

### 1. è©•ä¾¡åˆ—ã¯å®Œå…¨ç„¡è¦–

```javascript
const hyokaText = colMap['è©•ä¾¡'] !== undefined ? row[colMap['è©•ä¾¡']] : '';
// â†‘ èª­ã¿å–ã‚‹ã ã‘ã§ã€scoreè¨ˆç®—ã«ã¯ä¸€åˆ‡ä½¿ç”¨ã—ãªã„
```

### 2. ã‚¹ã‚³ã‚¢åˆ—ã®ã¿ä½¿ç”¨

```javascript
const scoreRaw = row[colMap['ã‚¹ã‚³ã‚¢']];  // â† ã“ã‚Œã ã‘
```

### 3. å‡¦ç†ã®é€æ˜Žæ€§

ã™ã¹ã¦ã®å¤‰æ›ã‚¹ãƒ†ãƒƒãƒ—ãŒã‚³ãƒ³ã‚½ãƒ¼ãƒ«ãƒ­ã‚°ã«å‡ºåŠ›ã•ã‚Œã‚‹:
```
1. raw: "ï¼•"
2. trimmed: "ï¼•"
3. å…¨è§’â†’åŠè§’: "5"
4. Number(): 5
5. ç¯„å›²ãƒã‚§ãƒƒã‚¯(1ã€œ5): 5
```

### 4. é”æˆæ¡ä»¶ã®ç¢ºèª

```
scoreMap.get("è·æ¥­ç”Ÿæ´»__æ¬ å¸­ç­‰ã®é€£çµ¡") = 5
```

ã“ã®å€¤ãŒ `5` ã§ã‚ã‚Œã°ã€ä¿®æ­£ã¯æˆåŠŸã§ã™ï¼

---

**ä½œæˆæ—¥**: 2026-02-18  
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 202602180120  
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: âœ… å®Ÿè£…å®Œäº†ãƒ»ãƒ†ã‚¹ãƒˆå¾…ã¡

---

**é‡è¦**: å¿…ãš **Ctrl+Shift+R** ã§ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ã‚¯ãƒªã‚¢ã—ã¦ã‹ã‚‰ç¢ºèªã—ã¦ãã ã•ã„ï¼
